FROM python:3.11.4

RUN apt update && apt upgrade -y

WORKDIR /usr/src/django_back

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

RUN pip install --upgrade pip

COPY ./requirements.txt /usr/src/django_back/

RUN pip install -r requirements.txt

ARG SECRET_KEY
ENV SECRET_KEY=$SECRET_KEY
ARG POSTGRES_ENGINE
ENV POSTGRES_ENGINE=$POSTGRES_ENGINE
ARG POSTGRES_DB
ENV POSTGRES_DB=$POSTGRES_DB
ARG POSTGRES_USER
ENV POSTGRES_USER=$POSTGRES_USER
ARG POSTGRES_PASSWORD
ENV POSTGRES_PASSWORD=$POSTGRES_PASSWORD
ARG POSTGRES_HOST
ENV POSTGRES_HOST=$POSTGRES_HOST
ARG ALLOWED_HOSTS
ENV ALLOWED_HOSTS=$ALLOWED_HOSTS
ARG DEBUG
ENV DEBUG=$DEBUG
ARG HELICONE_API_KEY
ENV HELICONE_API_KEY=$HELICONE_API_KEY
ARG AZURE_OPENAI_API_KEY
ENV AZURE_OPENAI_API_KEY=$AZURE_OPENAI_API_KEY
ARG AZURE_TRANSLATE_API_KEY
ENV AZURE_TRANSLATE_API_KEY=$AZURE_TRANSLATE_API_KEY
ARG OPENAI_KEY
ENV OPENAI_KEY=$OPENAI_KEY