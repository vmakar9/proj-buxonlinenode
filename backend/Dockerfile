FROM python:3.11.4

RUN apt update && apt upgrade -y

WORKDIR /usr/src/django_back

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

RUN pip install --upgrade pip

COPY ./requirements.txt /usr/src/django_back/

RUN pip install -r requirements.txt

ARG SECRET_KEY
ENV SECRET_KEY=$SECRET_KEY
ARG POSTGRES_ENGINE
ENV POSTGRES_ENGINE=$POSTGRES_ENGINE
ARG POSTGRES_DB
ENV POSTGRES_DB=$POSTGRES_DB
ARG POSTGRES_USER
ENV POSTGRES_USER=$POSTGRES_USER
ARG POSTGRES_PASSWORD
ENV POSTGRES_PASSWORD=$POSTGRES_PASSWORD
ARG POSTGRES_HOST
ENV POSTGRES_HOST=$POSTGRES_HOST
ARG ALLOWED_HOSTS
ENV ALLOWED_HOSTS=$ALLOWED_HOSTS
ARG DEBUG
ENV DEBUG=$DEBUG
#ARG AZURE_ACCOUNT_KEY
#ENV AZURE_ACCOUNT_KEY=$AZURE_ACCOUNT_KEY
#ARG OPENAI_API_KEY
#ENV OPENAI_API_KEY=$OPENAI_API_KEY
#ARG SENDGRID_API_KEY
#ENV SENDGRID_API_KEY=$SENDGRID_API_KEY
#ARG SENDGRID_FROM_EMAIL
#ENV SENDGRID_FROM_EMAIL=$SENDGRID_FROM_EMAIL
#ARG SENDGRID_FROM_EMAIL_NAME
#ENV SENDGRID_FROM_EMAIL_NAME=$SENDGRID_FROM_EMAIL_NAME
